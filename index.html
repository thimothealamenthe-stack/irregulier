<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Entraînement Verbes Irréguliers Anglais</title>
    <meta name="description"
        content="Application d'apprentissage interactive pour maîtriser les verbes irréguliers anglais au prétérit et participe passé avec traductions françaises">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <header>
            <div class="header-top">
                <div class="profile-display" id="profile-display" style="display: none;">
                    <span class="profile-icon"></span>
                    <span class="profile-username" id="username-display">Joueur</span>
                    <button class="edit-profile-btn" id="edit-profile-btn" title="Modifier le profil">Modifier</button>
                </div>
            </div>
            <h1>Verbes Irréguliers Anglais</h1>
            <p class="subtitle">Maîtrisez le prétérit et le participe passé</p>
            <button class="training-mode-button" id="training-mode-button">Mode Entraînement</button>
        </header>

        <!-- Multiplayer Progress Bars (hidden by default) -->
        <div id="multiplayer-progress" class="multiplayer-progress hidden"></div>

        <div id="selection-view" class="view active">
            <div class="search-container">
                <input type="text" id="search-input" placeholder="Rechercher un verbe..." />
            </div>

            <div class="stats-container">
                <div class="stat-card">
                    <div class="stat-value" id="total-verbs">0</div>
                    <div class="stat-label">Verbes disponibles</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="practiced-count">0</div>
                    <div class="stat-label">Pratiqués</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="success-rate">0%</div>
                    <div class="stat-label">Taux de réussite</div>
                </div>
            </div>

            <div class="verbs-grid" id="verbs-grid">
                <!-- Les verbes seront générés ici par JavaScript -->
            </div>
        </div>

        <div id="practice-view" class="view">
            <div class="practice-container">
                <button class="back-button" id="back-button">← Retour</button>

                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>

                <div class="practice-card">
                    <div class="verb-display">
                        <h2 id="current-verb">Verb</h2>
                        <p class="verb-base-form" id="verb-base">Base form</p>
                    </div>

                    <div class="question-container">
                        <h3 id="question-title">Quel est le prétérit ?</h3>
                        <input type="text" id="answer-input" placeholder="Votre réponse..." autocomplete="off" />
                        <button class="submit-button" id="submit-button">Valider</button>
                    </div>

                    <div class="feedback" id="feedback"></div>
                </div>

                <div class="practice-stats">
                    <div class="stat-item">
                        <span class="stat-icon">✅</span>
                        <span id="correct-count">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">❌</span>
                        <span id="incorrect-count">0</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Training Mode Overlay -->
        <div id="training-overlay" class="overlay">
            <div class="overlay-content">
                <button class="overlay-close" id="overlay-close">×</button>
                <h2>Configuration du Mode Entraînement</h2>
                <p class="overlay-subtitle">Personnalisez votre session d'entraînement</p>

                <div class="config-section">
                    <label class="toggle-option">
                        <span>Mode Personnalisé (choisir les verbes)</span>
                        <div class="toggle-switch">
                            <input type="checkbox" id="custom-mode-toggle" />
                            <span class="toggle-slider"></span>
                        </div>
                    </label>
                </div>

                <div id="random-mode-config" class="config-section">
                    <label for="verb-count">Nombre de verbes aléatoires</label>
                    <div class="number-selector">
                        <button class="number-btn" id="decrease-count">-</button>
                        <input type="number" id="verb-count" min="1" max="115" value="10" />
                        <button class="number-btn" id="increase-count">+</button>
                    </div>
                    <div class="quick-selectors">
                        <button class="quick-btn" data-count="5">5</button>
                        <button class="quick-btn" data-count="10">10</button>
                        <button class="quick-btn" data-count="20">20</button>
                        <button class="quick-btn" data-count="50">50</button>
                        <button class="quick-btn" data-count="115">Tous</button>
                    </div>
                </div>

                <div id="custom-verbs-config" class="config-section hidden">
                    <label>Sélectionnez les verbes à pratiquer</label>
                    <div class="custom-verbs-search">
                        <input type="text" id="custom-search" placeholder="Rechercher..." />
                    </div>
                    <div class="custom-verbs-grid" id="custom-verbs-grid">
                        <!-- Verbs will be populated here -->
                    </div>
                    <div class="selected-count">
                        <span id="selected-count">0</span> verbe(s) sélectionné(s)
                    </div>
                </div>

                <div class="config-section">
                    <label class="toggle-option">
                        <span>Activer le timer</span>
                        <div class="toggle-switch">
                            <input type="checkbox" id="timer-toggle" />
                            <span class="toggle-slider"></span>
                        </div>
                    </label>
                    <div id="timer-config" class="timer-config hidden">
                        <label for="timer-duration">Temps par question (secondes)</label>
                        <div class="number-selector">
                            <button class="number-btn" id="decrease-timer">-</button>
                            <input type="number" id="timer-duration" min="5" max="60" value="15" />
                            <button class="number-btn" id="increase-timer">+</button>
                        </div>
                    </div>
                </div>

                <div class="config-section">
                    <div class="info-box">
                        <p>Les verbes ratés seront automatiquement réaffichés plus tard dans la session</p>
                    </div>
                </div>

                <div class="config-section">
                    <button class="multiplayer-button" id="multiplayer-button">Mode Multijoueur</button>
                </div>

                <button class="start-training-button" id="start-training">Démarrer l'entraînement</button>
            </div>
        </div>

        <!-- Profile Overlay -->
        <div id="profile-overlay" class="overlay">
            <div class="overlay-content profile-content">
                <h2>Créer votre profil</h2>
                <p class="overlay-subtitle">Choisissez un pseudo pour jouer</p>

                <div class="config-section">
                    <label for="profile-username">Votre pseudo</label>
                    <input type="text" id="profile-username" placeholder="Entrez votre pseudo..." maxlength="15"
                        minlength="3" />
                    <p class="input-hint">3-15 caractères</p>
                </div>

                <button class="start-training-button" id="save-profile">Confirmer</button>
            </div>
        </div>

        <!-- Multiplayer Options Overlay -->
        <div id="multiplayer-overlay" class="overlay">
            <div class="overlay-content">
                <button class="overlay-close" id="multiplayer-close">×</button>
                <h2>Mode Multijoueur</h2>
                <p class="overlay-subtitle">Affrontez vos amis en temps réel !</p>

                <div class="multiplayer-options">
                    <button class="multiplayer-option-btn create-room-btn" id="create-room-btn">
                        <span class="option-icon"></span>
                        <span class="option-title">Créer un salon</span>
                        <span class="option-desc">Invitez vos amis avec un code</span>
                    </button>

                    <button class="multiplayer-option-btn join-room-btn" id="join-room-btn">
                        <span class="option-icon"></span>
                        <span class="option-title">Rejoindre un salon</span>
                        <span class="option-desc">Entrez le code d'un ami</span>
                    </button>
                </div>

                <div id="join-room-form" class="join-form hidden">
                    <label for="join-code-input">Code du salon</label>
                    <input type="text" id="join-code-input" placeholder="Ex: ABC123" maxlength="6"
                        style="text-transform: uppercase;" />
                    <button class="start-training-button" id="confirm-join">Rejoindre</button>
                </div>
            </div>
        </div>

        <!-- Waiting Room Overlay -->
        <div id="waiting-room-overlay" class="overlay">
            <div class="overlay-content waiting-room-content">
                <button class="overlay-close" id="waiting-room-close">×</button>
                <h2>Salle d'attente</h2>

                <div class="room-code-section">
                    <p>Code du salon :</p>
                    <div class="room-code-display" id="room-code-display">------</div>
                    <button class="copy-code-btn" id="copy-code-btn">Copier</button>
                </div>

                <div class="waiting-players">
                    <h3>Joueurs connectés</h3>
                    <div id="waiting-players-list" class="waiting-players-list">
                        <!-- Players will be added here dynamically -->
                    </div>
                </div>

                <button class="start-training-button" id="start-multi-game" style="display: none;">Lancer la
                    partie</button>
            </div>
        </div>

        <!-- Podium Overlay -->
        <div id="podium-overlay" class="overlay">
            <div class="overlay-content podium-content">
                <h2>Résultats</h2>

                <div id="podium-container" class="podium-container">
                    <!-- Podium will be generated here -->
                </div>

                <button class="start-training-button" id="close-podium">Retour à l'accueil</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="verbs-data.js"></script>
    <script src="multiplayer.js"></script>
    <script src="app.js"></script>
</body>

</html>